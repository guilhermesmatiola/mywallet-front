{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/guilherme/Documentos/PROJETOS-DRIVEN/projeto10-trackit/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/home/guilherme/Documentos/PROJETOS-DRIVEN/projeto10-trackit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{React,useEffect,useState,useContext}from\"react\";import styled from'styled-components';import Header from\"./Header\";import Footer from\"./Footer\";import dayjs from\"dayjs\";import locale from\"dayjs/locale/pt-br\";import axios from\"axios\";import TodayHabit from\"./TodayHabit\";import UserContext from\"../context/UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Today(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),habits=_useState2[0],setHabits=_useState2[1];var _useContext=useContext(UserContext),user=_useContext.user,setUser=_useContext.setUser;var image=user.image,token=user.token;var now=dayjs().locale(\"pt-br\");function loadHabits(){var config={headers:{Authorization:\"Bearer \".concat(token)}};var promise=axios.get(\"https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/today\",config);promise.then(function(resposta){nDone=0;for(var i=0;i<resposta.data.length;i++){if(resposta.data[i].done){nDone++;}}setUser({image:user.image,token:user.token,percentage:nDone/resposta.data.length*100});setHabits(resposta.data);});}var nDone=0;var txtcolor=\"#BABABA\";var percent;var txt=countDone();function countDone(){for(var i=0;i<habits.length;i++){if(habits[i].done){nDone++;}}if(nDone===0){return\"Nenhum hábito concluído ainda\";}else{txtcolor=\"#8FC549\";return\"\".concat(nDone/habits.length*100,\"% dos h\\xE1bitos conclu\\xEDdos\");}}useEffect(function(){loadHabits();},[]);var day=now.format(\"dddd\");var Day=day.charAt(0).toUpperCase()+day.slice(1);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Page,{children:[/*#__PURE__*/_jsxs(Container,{children:[\" \",/*#__PURE__*/_jsxs(\"h1\",{children:[Day,\", \",now.format(\"DD/MM/YYYY\"),\" \"]}),\" \"]}),/*#__PURE__*/_jsxs(Container,{children:[\" \",/*#__PURE__*/_jsx(Text,{color:txtcolor,children:txt}),\" \"]}),/*#__PURE__*/_jsx(Column,{children:habits.map(function(habit){return/*#__PURE__*/_jsx(TodayHabit,{loadHabits:loadHabits,habit:habit,token:token},habit.id);})})]}),/*#__PURE__*/_jsx(Footer,{percent:percent})]});}var Column=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    width: 100%;\\n    height: calc(100vh - 140px);\\n    background: #E5E5E5;\\n    margin: 20px;\\n    margin-bottom: 35px;\\n\"])));var Text=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    font-family: 'Lexend Deca';\\n    font-style: normal;\\n    font-weight: 400;\\n    font-size: 17.976px;\\n    line-height: 22px;\\n    color: \",\";\\n\"])),function(props){return props.color;});var Page=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    box-sizing: border-box;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    width: 100%;\\n    height: calc(100vh - 140px);\\n    background: #E5E5E5;\\n    //margin-top: 70px;\\n\"])));var Container=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n    width: 88%;\\n    margin-top: 20px;\\n    font-family: 'Lexend Deca', sans-serif;\\n    h1{\\n        font-family: 'Lexend Deca';\\n        font-style: normal;\\n        font-weight: 400;\\n        font-size: 22.976px;\\n        line-height: 29px;\\n        color: #126BA5;\\n    }\\n\"])));","map":{"version":3,"names":["React","useEffect","useState","useContext","styled","Header","Footer","dayjs","locale","axios","TodayHabit","UserContext","Today","habits","setHabits","user","setUser","image","token","now","loadHabits","config","headers","Authorization","promise","get","then","resposta","nDone","i","data","length","done","percentage","txtcolor","percent","txt","countDone","day","format","Day","charAt","toUpperCase","slice","map","habit","id","Column","div","Text","props","color","Page","Container"],"sources":["/home/guilherme/Documentos/PROJETOS-DRIVEN/projeto10-trackit/src/components/Today.js"],"sourcesContent":["import {React,useEffect,useState,useContext} from \"react\";\nimport styled from 'styled-components';\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport dayjs from \"dayjs\";\nimport locale from  \"dayjs/locale/pt-br\";\nimport axios from \"axios\";\nimport TodayHabit from \"./TodayHabit\";\nimport UserContext from \"../context/UserContext\";\n\nexport default function Today(){\n  \n    const [habits,setHabits]=useState([]);\n    \n    const { user , setUser} = useContext(UserContext);\n    \n    const {image,token} = user;\n \n    const now = dayjs().locale(\"pt-br\");\n\n    function loadHabits(){\n        const config = {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n        };\n\n        const promise = axios.get(`https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/today`,config);\n    \n        promise.then(resposta => {\n            nDone=0;\n            for(let i=0;i<resposta.data.length;i++){\n                if(resposta.data[i].done){\n                    nDone++;\n                }\n            }\n            setUser(\n                {   \n                    image: user.image,\n                    token: user.token,\n                    percentage: (nDone/resposta.data.length)*100\n                },\n            );\n            setHabits(resposta.data);\n        });\n        \n    }\n    let nDone=0;\n    let txtcolor=\"#BABABA\";\n    let percent;\n    let txt=countDone();\n    \n    function countDone(){\n        \n        for(let i=0;i<habits.length;i++){\n            if(habits[i].done){\n                nDone++;\n            }\n        }\n        if(nDone===0){\n            return \"Nenhum hábito concluído ainda\";\n        }else{\n            txtcolor=\"#8FC549\";\n            return `${nDone/habits.length*100}% dos hábitos concluídos`;\n        }\n    }\n\n    useEffect(() => {\n        loadHabits();\n        \n    }, []);\n\n    const day = now.format(\"dddd\");\n    const Day = day.charAt(0).toUpperCase() + day.slice(1);\n\n    return(\n        <>\n        <Header/>\n        <Page>\n            <Container> <h1>{Day}, {now.format(\"DD/MM/YYYY\")} </h1> </Container>\n            <Container> <Text color={txtcolor}>{txt}</Text> </Container>\n            <Column>\n                {habits.map((habit) => (\n                    <TodayHabit loadHabits={loadHabits} habit={habit} token={token} key={habit.id}/>\n                ))}\n            </Column>\n        </Page>\n        <Footer percent={percent}/>\n        </>\n    )\n}\nconst Column=styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: calc(100vh - 140px);\n    background: #E5E5E5;\n    margin: 20px;\n    margin-bottom: 35px;\n`\nconst Text=styled.div`\n    font-family: 'Lexend Deca';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 17.976px;\n    line-height: 22px;\n    color: ${props=>props.color};\n`\nconst Page=styled.div`\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    height: calc(100vh - 140px);\n    background: #E5E5E5;\n    //margin-top: 70px;\n`\nconst Container=styled.div`\n    display: flex;\n    align-items: center;\n    width: 88%;\n    margin-top: 20px;\n    font-family: 'Lexend Deca', sans-serif;\n    h1{\n        font-family: 'Lexend Deca';\n        font-style: normal;\n        font-weight: 400;\n        font-size: 22.976px;\n        line-height: 29px;\n        color: #126BA5;\n    }\n`"],"mappings":"2XAAA,OAAQA,KAAR,CAAcC,SAAd,CAAwBC,QAAxB,CAAiCC,UAAjC,KAAkD,OAAlD,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAoB,oBAApB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,WAAP,KAAuB,cAAvB,CACA,MAAOC,YAAP,KAAwB,wBAAxB,C,6IAEA,cAAe,SAASC,MAAT,EAAgB,CAE3B,cAAyBV,QAAQ,CAAC,EAAD,CAAjC,wCAAOW,MAAP,eAAcC,SAAd,eAEA,gBAA0BX,UAAU,CAACQ,WAAD,CAApC,CAAQI,IAAR,aAAQA,IAAR,CAAeC,OAAf,aAAeA,OAAf,CAEA,GAAOC,MAAP,CAAsBF,IAAtB,CAAOE,KAAP,CAAaC,KAAb,CAAsBH,IAAtB,CAAaG,KAAb,CAEA,GAAMC,IAAG,CAAGZ,KAAK,GAAGC,MAAR,CAAe,OAAf,CAAZ,CAEA,QAASY,WAAT,EAAqB,CACjB,GAAMC,OAAM,CAAG,CACXC,OAAO,CAAE,CACPC,aAAa,kBAAYL,KAAZ,CADN,CADE,CAAf,CAMA,GAAMM,QAAO,CAAGf,KAAK,CAACgB,GAAN,2EAAoFJ,MAApF,CAAhB,CAEAG,OAAO,CAACE,IAAR,CAAa,SAAAC,QAAQ,CAAI,CACrBC,KAAK,CAAC,CAAN,CACA,IAAI,GAAIC,EAAC,CAAC,CAAV,CAAYA,CAAC,CAACF,QAAQ,CAACG,IAAT,CAAcC,MAA5B,CAAmCF,CAAC,EAApC,CAAuC,CACnC,GAAGF,QAAQ,CAACG,IAAT,CAAcD,CAAd,EAAiBG,IAApB,CAAyB,CACrBJ,KAAK,GACR,CACJ,CACDZ,OAAO,CACH,CACIC,KAAK,CAAEF,IAAI,CAACE,KADhB,CAEIC,KAAK,CAAEH,IAAI,CAACG,KAFhB,CAGIe,UAAU,CAAGL,KAAK,CAACD,QAAQ,CAACG,IAAT,CAAcC,MAArB,CAA6B,GAH7C,CADG,CAAP,CAOAjB,SAAS,CAACa,QAAQ,CAACG,IAAV,CAAT,CACH,CAfD,EAiBH,CACD,GAAIF,MAAK,CAAC,CAAV,CACA,GAAIM,SAAQ,CAAC,SAAb,CACA,GAAIC,QAAJ,CACA,GAAIC,IAAG,CAACC,SAAS,EAAjB,CAEA,QAASA,UAAT,EAAoB,CAEhB,IAAI,GAAIR,EAAC,CAAC,CAAV,CAAYA,CAAC,CAAChB,MAAM,CAACkB,MAArB,CAA4BF,CAAC,EAA7B,CAAgC,CAC5B,GAAGhB,MAAM,CAACgB,CAAD,CAAN,CAAUG,IAAb,CAAkB,CACdJ,KAAK,GACR,CACJ,CACD,GAAGA,KAAK,GAAG,CAAX,CAAa,CACT,MAAO,+BAAP,CACH,CAFD,IAEK,CACDM,QAAQ,CAAC,SAAT,CACA,gBAAUN,KAAK,CAACf,MAAM,CAACkB,MAAb,CAAoB,GAA9B,mCACH,CACJ,CAED9B,SAAS,CAAC,UAAM,CACZmB,UAAU,GAEb,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMkB,IAAG,CAAGnB,GAAG,CAACoB,MAAJ,CAAW,MAAX,CAAZ,CACA,GAAMC,IAAG,CAAGF,GAAG,CAACG,MAAJ,CAAW,CAAX,EAAcC,WAAd,GAA8BJ,GAAG,CAACK,KAAJ,CAAU,CAAV,CAA1C,CAEA,mBACI,wCACA,KAAC,MAAD,IADA,cAEA,MAAC,IAAD,yBACI,MAAC,SAAD,6BAAY,sBAAKH,GAAL,MAAYrB,GAAG,CAACoB,MAAJ,CAAW,YAAX,CAAZ,OAAZ,OADJ,cAEI,MAAC,SAAD,6BAAY,KAAC,IAAD,EAAM,KAAK,CAAEL,QAAb,UAAwBE,GAAxB,EAAZ,OAFJ,cAGI,KAAC,MAAD,WACKvB,MAAM,CAAC+B,GAAP,CAAW,SAACC,KAAD,qBACR,KAAC,UAAD,EAAY,UAAU,CAAEzB,UAAxB,CAAoC,KAAK,CAAEyB,KAA3C,CAAkD,KAAK,CAAE3B,KAAzD,EAAqE2B,KAAK,CAACC,EAA3E,CADQ,EAAX,CADL,EAHJ,GAFA,cAWA,KAAC,MAAD,EAAQ,OAAO,CAAEX,OAAjB,EAXA,GADJ,CAeH,CACD,GAAMY,OAAM,CAAC3C,MAAM,CAAC4C,GAAR,yQAAZ,CAUA,GAAMC,KAAI,CAAC7C,MAAM,CAAC4C,GAAR,yNAMG,SAAAE,KAAK,QAAEA,MAAK,CAACC,KAAR,EANR,CAAV,CAQA,GAAMC,KAAI,CAAChD,MAAM,CAAC4C,GAAR,oRAAV,CAUA,GAAMK,UAAS,CAACjD,MAAM,CAAC4C,GAAR,wYAAf"},"metadata":{},"sourceType":"module"}